(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{441:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("æ–‡ç« é¦–å‘å…¬ä¼—å·ï¼šèŒèŒå“’è‰å¤´å°†å†›ï¼Œæœ€è¿‘å…³æ³¨æœ‰ğŸï¼Œæ¬¢è¿å…³æ³¨ï¼")])]),t._v(" "),s("p",[t._v("æœ€è¿‘åœ¨ç ”ç©¶"),s("code",[t._v("React")]),t._v("çš„æºç ï¼Œç„¶åï¼Œæˆ‘å°±æ‚Ÿäº†ï¼")]),t._v(" "),s("p",{attrs:{align:"center"}},[s("img",{attrs:{src:"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/42e6ae2e8ca749e58d3c08f7d808b255~tplv-k3u1fbpfcp-watermark.image?",alt:"image.png",width:"50%"}})]),t._v(" "),s("h3",{attrs:{id:"ğŸ’¡æ¨èé˜…è¯»"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’¡æ¨èé˜…è¯»"}},[t._v("#")]),t._v(" ğŸ’¡æ¨èé˜…è¯»")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/7241567583504728119?share_token=e6d6f76c-3962-473b-bd11-716c41a1089d",target:"_blank",rel:"noopener noreferrer"}},[t._v("ğŸ‰å¹²è´§æ»¡æ»¡ï¼ŒReactè®¾è®¡åŸç†ï¼Œè—åœ¨æºç é‡Œçš„äº”æŒ‡å±±ğŸ‰"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"ğŸ’-å¼€é—¨è§å±±"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’-å¼€é—¨è§å±±"}},[t._v("#")]),t._v(" ğŸ’ å¼€é—¨è§å±±")]),t._v(" "),s("p",[t._v("è¯·çœ‹ğŸ‘‡çš„ä»£ç ï¼šä½ è§‰å¾—å¯ä»¥æŒ‰é¢„æœŸè¿è¡Œå—ï¼Ÿ")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" useMemo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" useState "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" setCount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" onClick "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("count")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  \n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMemo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div className"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"App"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("button onClick"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("onClick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n          count is "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("button"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" App"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("ç­”æ¡ˆæ˜¯å®Œå…¨å¯ä»¥ï¼")]),t._v(" "),s("h2",{attrs:{id:"ğŸ’-åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’-åˆ†æ"}},[t._v("#")]),t._v(" ğŸ’ åˆ†æ")]),t._v(" "),s("h3",{attrs:{id:"ğŸš—-ç”¨æ³•åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš—-ç”¨æ³•åˆ†æ"}},[t._v("#")]),t._v(" ğŸš— ç”¨æ³•åˆ†æ")]),t._v(" "),s("p",[t._v("ä»–ä»¬éƒ½æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ"),s("code",[t._v("useXxx(callback, [...deps])")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ğŸ‘‰ç¬¬ä¸€ä¸ªå‚æ•°"),s("code",[t._v("callback")]),t._v("æ˜¯å›è°ƒå‡½æ•°")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰ç¬¬äºŒä¸ªå‚æ•°"),s("code",[t._v("deps")]),t._v("æ˜¯ä¾èµ–é¡¹")])])]),t._v(" "),s("p",[t._v("ä¸åŒçš„æ˜¯å½“ä¾èµ–é¡¹å‘ç”Ÿæ”¹å˜æ—¶")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ğŸš†"),s("code",[t._v("useCallback")]),t._v("ä¼šé‡æ–°åˆ›å»ºå›è°ƒå‡½æ•°ï¼Œä»¥ä¿è¯æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯æœ€æ–°å€¼ã€‚å¹¶ç¼“å­˜è¿™ä¸ªå‡½æ•°")])]),t._v(" "),s("li",[s("p",[t._v("ğŸš†"),s("code",[t._v("useEffect")]),t._v("å›è°ƒå‡½æ•°ä¼šé‡æ–°æ‰§è¡Œ")])]),t._v(" "),s("li",[s("p",[t._v("ğŸš†"),s("code",[t._v("useMemo")]),t._v("å›è°ƒå‡½æ•°ä¼šé‡æ–°æ‰§è¡Œï¼Œå¹¶ç¼“å­˜è¿”å›å€¼ã€‚")])])]),t._v(" "),s("p",[t._v("æ ¹æ®"),s("code",[t._v("useMemo")]),t._v("è¿”å›å€¼çš„ä¸åŒï¼Œå¯ä»¥æ¨¡æ‹Ÿå‡ºä¸åŒçš„æ•ˆæœï¼š")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ğŸ‘‰å½“è¿”å›å€¼æ˜¯ä¸ªå‡½æ•°æ—¶ï¼Œå®ƒ"),s("code",[t._v("useCallback")]),t._v("å’Œæ˜¯å®Œå…¨ç­‰æ•ˆçš„ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰å½“æ²¡æœ‰è¿”å›å€¼æˆ–è€…ä¸ç®¡è¿”å›å€¼æ—¶ï¼Œå®ƒ"),s("code",[t._v("useEffect")]),t._v("å’Œéƒ¨åˆ†åŠŸèƒ½æ˜¯ç­‰æ•ˆçš„")])])]),t._v(" "),s("blockquote",[s("p",[t._v("è¿™æ˜¯å› ä¸ºï¼Œå®ƒä¸ä¼šåƒ"),s("code",[t._v("useEffect")]),t._v("ä¸€æ ·ï¼Œå¯¹è¿”å›å€¼åšå¤„ç†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæ— æ³•æ¨¡æ‹Ÿ"),s("code",[t._v("unMounted")]),t._v("ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚")])]),t._v(" "),s("p",[t._v("å°±æ˜¯è¿™ä¹ˆç®€å•çš„åŸå› ï¼Œä¸Šé¢çš„ä»£ç ä¼šæ‰§è¡ŒæˆåŠŸã€‚")]),t._v(" "),s("h3",{attrs:{id:"ğŸš—-æºç åˆ†æ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš—-æºç åˆ†æ"}},[t._v("#")]),t._v(" ğŸš— æºç åˆ†æ")]),t._v(" "),s("p",[t._v("è¿™éƒ¨åˆ†æ˜¯é€‰è¯»ï¼Œå¦‚æœä½ å¯¹æºç æ„Ÿå…´è¶£ï¼Œå¯ä»¥é˜…è¯»è¿™å—ã€‚")]),t._v(" "),s("h4",{attrs:{id:"ğŸš†-usememoæºç é€»è¾‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš†-usememoæºç é€»è¾‘"}},[t._v("#")]),t._v(" ğŸš† "),s("code",[t._v("useMemo")]),t._v("æºç é€»è¾‘")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ğŸ‘‰æ³¨å†Œ"),s("code",[t._v("hook")]),t._v("çŠ¶æ€")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰æ­¤æ—¶æ˜¯"),s("code",[t._v("mounted")]),t._v("é˜¶æ®µï¼Œè°ƒç”¨"),s("code",[t._v("mountMemo")]),t._v("ï¼Œ")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰å°†æ³¨å†Œçš„"),s("code",[t._v("callback")]),t._v("å’Œ"),s("code",[t._v("deps")]),t._v("æ‹¿å‡ºæ¥")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰æ‰§è¡Œ"),s("code",[t._v("callback")]),t._v("ï¼Œå¹¶å°†æ‰§è¡Œç»“æœå’Œ"),s("code",[t._v("deps")]),t._v("ç¼“å­˜åœ¨å½“å‰"),s("code",[t._v("hook")]),t._v("çš„çŠ¶æ€ä¸Š")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰"),s("code",[t._v("deps")]),t._v("å‘ç”Ÿæ”¹å˜ï¼Œè¿›å…¥"),s("code",[t._v("update")]),t._v("é˜¶æ®µï¼Œè°ƒç”¨"),s("code",[t._v("updateMemo")])])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰å–å‡ºå½“å‰çš„"),s("code",[t._v("hook")]),t._v("çŠ¶æ€ï¼Œæ‹¿åˆ°"),s("code",[t._v("callback")]),t._v("å’Œ"),s("code",[t._v("deps")]),t._v("ï¼Œå†ä»å½“å‰"),s("code",[t._v("hook")]),t._v("æ‹¿åˆ°ä¸Šæ¬¡çš„"),s("code",[t._v("deps")])])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰æ¯”è¾ƒå‰åä¸¤æ¬¡çš„"),s("code",[t._v("deps")]),t._v("ï¼Œå¦‚æœä¸€è‡´ï¼Œç›´æ¥è¿”å›å½“å‰çš„çŠ¶æ€å€¼")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰å¦åˆ™é‡æ–°æ‰§è¡Œ"),s("code",[t._v("callback")]),t._v("ï¼Œä¿æŒè¿”å›å€¼ï¼Œå¹¶å°†è¯¥å€¼æœ€ä¸ºæœ€æ–°çš„çŠ¶æ€å€¼å’Œ"),s("code",[t._v("deps")]),t._v("ä¸€èµ·ä¿å­˜èµ·æ¥")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" mountMemo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("nextCreate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("deps")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mixed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‹¿åˆ°å½“å‰çš„hookçŠ¶æ€")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hook "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mountWorkInProgressHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‹¿åˆ°å½“å‰çš„hookä¾èµ–é¡¹")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nextDeps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" deps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shouldDoubleInvokeUserFnsInHooksDEV"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextCreate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ‰§è¡Œå›è°ƒå‡½æ•°")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nextValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextCreate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¼“å­˜å›è°ƒå‡½æ•°è¿”å›å€¼å’Œä¾èµ–")]),t._v("\n  hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nextValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextDeps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›è¿”å›å€¼")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" nextValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" updateMemo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("nextCreate")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("deps")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mixed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hook "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateWorkInProgressHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nextDeps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" deps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" prevState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Assume these are defined. If they're not, areHookInputsEqual will warn.")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextDeps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("prevDeps")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mixed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("areHookInputsEqual")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextDeps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevDeps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœå‰åä¾èµ–ç›¸åŒæ—¶ï¼Œç›´æ¥è¿”å›å½“å‰å€¼")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("shouldDoubleInvokeUserFnsInHooksDEV"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextCreate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦åˆ™é‡æ–°è®¡ç®—èµ‹å€¼ï¼Œå¹¶è¿”å›æœ€æ–°å€¼")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nextValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("nextCreate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nextValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextDeps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" nextValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"ğŸš†-usecallbackæºç é€»è¾‘"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš†-usecallbackæºç é€»è¾‘"}},[t._v("#")]),t._v(" ğŸš† "),s("code",[t._v("useCallback")]),t._v("æºç é€»è¾‘")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("ğŸ‘‰æ³¨å†Œ"),s("code",[t._v("hook")]),t._v("çŠ¶æ€")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰æ­¤æ—¶æ˜¯"),s("code",[t._v("mounted")]),t._v("é˜¶æ®µï¼Œè°ƒç”¨"),s("code",[t._v("mountCallback")]),t._v("ï¼Œ")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰å°†æ³¨å†Œçš„"),s("code",[t._v("callback")]),t._v("å’Œ"),s("code",[t._v("deps")]),t._v("æ‹¿å‡ºæ¥")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰å°†"),s("code",[t._v("callback")]),t._v("å’Œ"),s("code",[t._v("deps")]),t._v("ç¼“å­˜åœ¨å½“å‰"),s("code",[t._v("hook")]),t._v("çš„çŠ¶æ€ä¸Š")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰"),s("code",[t._v("deps")]),t._v("å‘ç”Ÿæ”¹å˜ï¼Œè¿›å…¥"),s("code",[t._v("update")]),t._v("é˜¶æ®µï¼Œè°ƒç”¨"),s("code",[t._v("updateCallback")])])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰å–å‡ºå½“å‰çš„"),s("code",[t._v("hook")]),t._v("çŠ¶æ€ï¼Œæ‹¿åˆ°"),s("code",[t._v("callback")]),t._v("å’Œ"),s("code",[t._v("deps")]),t._v("ï¼Œå†ä»å½“å‰"),s("code",[t._v("hook")]),t._v("æ‹¿åˆ°ä¸Šæ¬¡çš„"),s("code",[t._v("deps")])])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰æ¯”è¾ƒå‰åä¸¤æ¬¡çš„"),s("code",[t._v("deps")]),t._v("ï¼Œå¦‚æœä¸€è‡´ï¼Œç›´æ¥è¿”å›å½“å‰çš„çŠ¶æ€å€¼")])]),t._v(" "),s("li",[s("p",[t._v("ğŸ‘‰å¦åˆ™é‡æ–°å°†"),s("code",[t._v("callback")]),t._v("åšä¸ºæœ€æ–°çš„çŠ¶æ€å€¼å’Œ"),s("code",[t._v("deps")]),t._v("ä¸€èµ·ä¿å­˜èµ·æ¥")])])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" mountCallback"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("deps")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mixed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–å½“å‰hookçŠ¶æ€")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hook "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mountWorkInProgressHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è·å–å½“å‰hookä¾èµ–é¡¹")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nextDeps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" deps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç¼“å­˜å›è°ƒå‡½æ•°å’Œä¾èµ–")]),t._v("\n  hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextDeps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿”å›å›è°ƒå‡½æ•°")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" updateCallback"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("deps")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mixed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hook "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateWorkInProgressHook")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nextDeps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" deps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("undefined")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" deps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" prevState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextDeps "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("prevDeps")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("mixed"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("areHookInputsEqual")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nextDeps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" prevDeps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦‚æœä¾èµ–é¡¹ç›¸åŒæ—¶ï¼Œç›´æ¥è¿”å›å½“å‰å€¼")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" prevState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¦åˆ™é‡æ–°èµ‹å€¼ï¼Œå¹¶è¿”å›æœ€æ–°å€¼")]),t._v("\n  hook"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("memoizedState "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nextDeps"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" callback"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[t._v("ä»æºç ä¸Šçœ‹ï¼Œ"),s("code",[t._v("useCallback")]),t._v("å’Œ"),s("code",[t._v("useMemo")]),t._v("çš„å®ç°ååˆ†ç±»ä¼¼ï¼Œå”¯ä¸€çš„ä¸åŒä¹‹å¤„æ˜¯ï¼š"),s("code",[t._v("useMemo")]),t._v("åœ¨ä¾èµ–é¡¹å‘ç”Ÿå˜åŒ–æ—¶ä¼šç¼“å­˜å›è°ƒå‡½æ•°çš„è¿”å›å€¼ã€‚")]),t._v(" "),s("h2",{attrs:{id:"ğŸ’-æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ’-æ€»ç»“"}},[t._v("#")]),t._v(" ğŸ’ æ€»ç»“")]),t._v(" "),s("p",[s("code",[t._v("useCallback")]),t._v("å’Œ"),s("code",[t._v("useMemo")]),t._v("éƒ½æ˜¯ç¼“å­˜ä¸­é—´çŠ¶æ€ï¼Œ")]),t._v(" "),s("p",[t._v("ä¸åŒçš„æ˜¯"),s("code",[t._v("useMemo")]),t._v("å¯ä»¥ç¼“å­˜ä»»ä½•ç±»å‹çš„å€¼ï¼Œ"),s("code",[t._v("useCallback")]),t._v("ä»…ä»…ç¼“å­˜å‡½æ•°ã€‚æ‰€ä»¥å¼€å¤´çš„ä¾‹å­å¯ä»¥æŒ‰é¢„æœŸè¿è¡Œã€‚")]),t._v(" "),s("p",[t._v("å¥½äº†ï¼Œä»Šå¤©çš„åˆ†äº«æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å¸Œæœ›å¯ä»¥å¸®ä½ ç†è§£åœ°æ›´æ·±ä¸€ç‚¹ã€‚")]),t._v(" "),s("p",[t._v("ä¸‹ç¯‡æˆ‘ä»¬ç»§ç»­èŠ"),s("code",[t._v("hook")]),t._v("ã€‚")])])}),[],!1,null,null,null);s.default=e.exports}}]);